<!DOCTYPE html>
<html>
    <head>
        <title>{{ options.title }}{% block title %}{% end %}</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="{{ static_url('css/bootstrap.min.css') }}" rel="stylesheet" media="screen">
        <link href="{{ static_url('css/bootstrap-responsive.min.css')}}" rel="stylesheet" media="screen">
        <link href="{{ static_url('css/custom.css') }}" rel="stylesheet" media="screen">
    </head>
    <body>
        <script src="http://code.jquery.com/jquery.js"></script>
        <script src="{{ static_url('js/bootstrap.min.js') }}"></script>
        <header class="jumbotron subhead" id="overview">
            <div class="container-fluid">
                <div class="hero-unit">
                    <a href="/">
                        <h1>{{ options.title }}</h1>
                    </a>
                    <p>{{ options.slogan }}</p>
                </div>
                {% block header %}{% end %}
            </div>
        </header>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span2">
                    {% module MenuModule(url_path=url_path, current_user=current_user) %}
                    {% block sidebar %}{% end %}
                </div>
                <div class="span7">
                    {% try %}
                        {% if isinstance(message, str) %}
                            <div class="alert alert-error">
                                <ul><li>{{ _(message) }}</li></ul>
                            </div>
                        {% elif isinstance(message, dict) %}
                            <div class="alert alert-error">
                                <ul>
                                {% for k, v in message.iteritems() %}
                                    <li>{{ _(v[0]) }}</li>
                                {% end %}
                                </ul>
                            </div>
                        {% elif isinstance(message, list) %}
                            <div class="alert alert-error">
                                <ul>
                                {% for m in message %}
                                    <li>{{ _(m) }}</li>
                                {% end %}
                                </ul>
                            </div>
                        {% end %}
                    {% except %}
                        {# Catching exception when message is not present #}
                    {% end %}
                    {% block content %}{% end %}
                </div>
                <div class="span3">
                    {% module SearchModule() %}
                    {% module TagsCloudModule(tags=_tags) %}
                    {% module RecentPostsModule(posts=_posts) %}
                    {% module RecentCommentsModule(comments=_comments) %}
                </div>
            </div>
        </div>
        <footer class="footer">
            <div class="container-fluid pull-right">
                {% block footer %}{% end %}
                {% module PoweredByModule() %}
            </div>
        </footer>
        {% module GoogleAnalyticsModule() %}
    </body>
</html>
